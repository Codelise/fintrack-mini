module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},17069,a=>{"use strict";a.s(["UserProvider",()=>f,"useUser",()=>g]);var b=a.i(87924),c=a.i(72131),d=a.i(45470);let e=(0,c.createContext)();function f({children:a,initialSession:f}){let[g,h]=(0,c.useState)(f?.user??null),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!f);return(0,c.useEffect)(()=>{let a=!0,b=()=>{let{data:{subscription:a}}=d.supabase.auth.onAuthStateChange(async(a,b)=>{h(b?.user??null),l(!1),"SIGNED_OUT"===a&&j(!1)});return()=>a.unsubscribe()};if(f&&f.user)return b();(async()=>{try{let{data:{session:a},error:b}=await d.supabase.auth.getSession();if(b)return void console.error("Error getting session:",b);a?.user?h(a.user):h(null)}catch(a){console.error("Error in getSession:",a)}finally{a&&l(!1)}})();let c=b();return()=>{a=!1,"function"==typeof c&&c()}},[f]),(0,b.jsx)(e.Provider,{value:{user:g,setUser:h,isOnboarded:i,setIsOnboarded:j,loading:k},children:a})}let g=()=>{let a=(0,c.useContext)(e);if(!a)throw Error("useUser must be used within a UserProvider");return a}},69750,a=>{"use strict";a.s(["default",()=>q,"transactionKeys",()=>o,"useTransactions",()=>p],69750);var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(45470);async function f(a,b={}){let c=e.supabase.from("transactions").select("*, categories (*)").eq("user_id",a);b.wallet_id&&(c=c.eq("wallet_id",b.wallet_id)),b.startDate&&b.endDate&&(c=c.gte("date",b.startDate).lte("date",b.endDate));let{data:d,error:g}=await c.order("date",{ascending:!1});return{data:d,error:g}}async function g(a){let{data:b,error:c}=await e.supabase.from("transactions").insert([a]).select();return{data:b,error:c}}async function h(a,b){let{data:c,error:d}=await e.supabase.from("transactions").update(b).eq("transaction_id",a).select();return{data:c,error:d}}async function i(a){let{data:b,error:c}=await e.supabase.from("transactions").delete().eq("transaction_id",a);return{data:b,error:c}}async function j(a){let{data:b,error:c}=await e.supabase.from("transactions").select("*, categories (*)").eq("transaction_id",a).single();return{data:b,error:c}}async function k(a,b){let{data:c,error:d}=await e.supabase.from("transactions").select("*, categories (*)").eq("user_id",a).eq("wallet_id",b).order("date",{ascending:!1});return{data:c,error:d}}async function l(a,b){let{data:c,error:d}=await e.supabase.from("transactions").select("*, categories (*)").eq("user_id",a).eq("category_id",b).order("date",{ascending:!1});return{data:c,error:d}}async function m(a,b,c){let{data:d,error:f}=await e.supabase.from("transactions").select("*, categories (*)").eq("user_id",a).gte("date",b).lte("date",c).order("date",{ascending:!1});return{data:d,error:f}}let n=new class{async getTransactions(a,b={}){try{return await f(a,b)}catch(a){return console.error("Error fetching transactions:",a),{data:null,error:a}}}async getTransactionById(a){try{return await j(a)}catch(a){return console.error("Error fetching transaction:",a),{data:null,error:a}}}async createTransaction(a){try{if(console.log("üéØ Transaction Service - Creating transaction with data:",JSON.stringify(a,null,2)),!a.user_id||!a.amount||!a.transaction_type||!a.date)throw console.error("‚ùå Missing required fields:",{user_id:a.user_id,amount:a.amount,transaction_type:a.transaction_type,date:a.date}),Error("User ID, amount, transaction type, and date are required");if(a.amount<=0)throw Error("Transaction amount must be greater than 0");let b=await g(a);return console.log("‚úÖ Transaction creation result:",b),b}catch(a){return console.error("‚ùå Error creating transaction:",a),{data:null,error:a}}}async updateTransaction(a,b){try{if(console.log("Service: Updating transaction",a,b),!a)throw Error("Transaction ID is required");if(b.amount&&b.amount<=0)throw Error("Transaction amount must be greater than 0");let c=await h(a,b);if(console.log("Service: Update result",c),c.error)throw console.error("Service: Update failed:",c.error),c.error;return c}catch(a){throw console.error("Service: Error updating transaction:",a),a}}async deleteTransaction(a){try{return await i(a)}catch(a){return console.error("Error deleting transaction:",a),{error:a}}}async getTransactionsByWallet(a,b){try{return await k(a,b)}catch(a){return console.error("Error fetching wallet transactions:",a),{data:null,error:a}}}async getTransactionsByCategory(a,b){try{return await l(a,b)}catch(a){return console.error("Error fetching category transactions:",a),{data:null,error:a}}}async getTransactionsByDateRange(a,b,c){try{return await m(a,b,c)}catch(a){return console.error("Error fetching transactions by date range:",a),{data:null,error:a}}}},o={all:["transactions"],lists:()=>[...o.all,"list"],list:a=>[...o.lists(),{filters:a}],details:()=>[...o.all,"detail"],detail:a=>[...o.details(),a],byWallet:a=>[...o.lists(),{walletId:a}],byCategory:a=>[...o.lists(),{categoryId:a}],byDateRange:(a,b)=>[...o.lists(),{startDate:a,endDate:b}]},p=()=>{let a=(0,d.useQueryClient)(),e=(0,c.useMutation)({mutationFn:n.createTransaction,onSuccess:b=>{b.data&&(a.invalidateQueries({queryKey:o.lists()}),a.invalidateQueries({queryKey:["dashboard"]}),a.invalidateQueries({queryKey:["reports"]}))},onError:a=>{console.error("Error creating transaction:",a)}}),f=(0,c.useMutation)({mutationFn:({transactionId:a,updates:b})=>n.updateTransaction(a,b),onSuccess:(b,c)=>{b.data&&(a.setQueryData(o.detail(c.transactionId),b.data[0]),a.setQueryData(o.lists(),a=>a?.map(a=>a.transaction_id===c.transactionId?b.data[0]:a)),a.invalidateQueries({queryKey:["dashboard"]}),a.invalidateQueries({queryKey:["reports"]}))},onError:a=>{console.error("Error updating transaction:",a)}}),g=(0,c.useMutation)({mutationFn:n.deleteTransaction,onSuccess:(b,c)=>{a.removeQueries({queryKey:o.detail(c)}),a.setQueryData(o.lists(),a=>a?.filter(a=>a.transaction_id!==c)),a.invalidateQueries({queryKey:["dashboard"]}),a.invalidateQueries({queryKey:["reports"]})},onError:a=>{console.error("Error deleting transaction:",a)}});return{getTransactions:(a,c={})=>(0,b.useQuery)({queryKey:o.list({userId:a,...c}),queryFn:()=>n.getTransactions(a,c),enabled:!!a,staleTime:12e4}),getTransactionById:a=>(0,b.useQuery)({queryKey:o.detail(a),queryFn:()=>n.getTransactionById(a),enabled:!!a,staleTime:3e5}),getTransactionsByWallet:a=>(0,b.useQuery)({queryKey:o.byWallet(a),queryFn:()=>n.getTransactionsByWallet(userId,a),enabled:!!userId&&!!a,staleTime:12e4}),getTransactionsByCategory:(a,c)=>(0,b.useQuery)({queryKey:o.byCategory(c),queryFn:()=>n.getTransactionsByCategory(a,c),enabled:!!a&&!!c,staleTime:12e4}),getTransactionsByDateRange:(a,c,d)=>(0,b.useQuery)({queryKey:o.byDateRange(c,d),queryFn:()=>n.getTransactionsByDateRange(a,c,d),enabled:!!a&&!!c&&!!d,staleTime:12e4}),createTransaction:a=>e.mutateAsync(a),updateTransaction:(a,b)=>f.mutateAsync({transactionId:a,updates:b}),deleteTransaction:a=>g.mutateAsync(a),clearError:()=>{e.reset(),f.reset(),g.reset()},mutations:{createTransaction:e,updateTransaction:f,deleteTransaction:g}}},q=p},21972,a=>{"use strict";a.s(["useWallets",()=>l,"walletKeys",()=>k],21972);var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(45470);async function f(a){let{data:b,error:c}=await e.supabase.from("wallets").select("*").eq("user_id",a).order("created_at",{ascending:!1});return{data:b,error:c}}async function g(a){let{data:b,error:c}=await e.supabase.from("wallets").insert([a]).select();return{data:b,error:c}}async function h(a,b){let{data:c,error:d}=await e.supabase.from("wallets").update(b).eq("wallet_id",a).select();return{data:c,error:d}}async function i(a){let{data:b,error:c}=await e.supabase.from("wallets").delete().eq("wallet_id",a);return{data:b,error:c}}let j=new class{async getWallets(a){try{return await f(a)}catch(a){return console.error("Error fetching wallets:",a),{data:null,error:a}}}async createWallet(a){try{if(!a.user_id||!a.wallet_name)throw Error("User ID and wallet name are required");return await g(a)}catch(a){return console.error("Error creating wallet:",a),{data:null,error:a}}}async createDefaultWallet(a){try{return await this.createWallet({user_id:a,wallet_name:"Main Wallet",balance:0,currency:"PHP"})}catch(a){return console.error("Error creating default wallet:",a),{data:null,error:a}}}async updateWallet(a,b){try{if(!a)throw Error("Wallet ID is required");return await h(a,b)}catch(a){throw console.error("Error updating wallet:",a),a}}async deleteWallet(a){try{return await i(a)}catch(a){return console.error("Error deleting wallet:",a),{error:a}}}},k={all:["wallets"],lists:()=>[...k.all,"list"],list:a=>[...k.lists(),{filters:a}],details:()=>[...k.all,"detail"],detail:a=>[...k.details(),a]},l=()=>{let a=(0,d.useQueryClient)(),e=(0,c.useMutation)({mutationFn:j.createWallet,onSuccess:b=>{b.data&&a.invalidateQueries({queryKey:k.lists()})},onError:a=>{console.error("Error creating wallet:",a)}}),f=(0,c.useMutation)({mutationFn:j.createDefaultWallet,onSuccess:b=>{b.data&&a.invalidateQueries({queryKey:k.lists()})},onError:a=>{console.error("Error creating default wallet:",a)}}),g=(0,c.useMutation)({mutationFn:({walletId:a,updates:b})=>j.updateWallet(a,b),onSuccess:(b,c)=>{b.data&&a.setQueryData(k.lists(),a=>a?.map(a=>a.wallet_id===c.walletId?b.data[0]:a))}}),h=(0,c.useMutation)({mutationFn:j.deleteWallet,onSuccess:(b,c)=>{a.setQueryData(k.lists(),a=>a?.filter(a=>a.wallet_id!==c))}});return{getWallets:a=>(0,b.useQuery)({queryKey:k.list({userId:a}),queryFn:()=>j.getWallets(a),enabled:!!a,staleTime:12e4}),createWallet:a=>e.mutateAsync(a),createDefaultWallet:a=>f.mutateAsync(a),updateWallet:(a,b)=>g.mutateAsync({walletId:a,updates:b}),deleteWallet:a=>h.mutateAsync(a),clearError:()=>{e.reset(),f.reset(),g.reset(),h.reset()},mutations:{createWallet:e,createDefaultWallet:f,updateWallet:g,deleteWallet:h}}}},23392,a=>{"use strict";a.s(["default",()=>i]);var b=a.i(87924),c=a.i(37927),d=a.i(40554),e=a.i(17069),f=a.i(72131),g=a.i(21972),h=a.i(69750);function i({children:a}){return(0,f.useEffect)(()=>{try{let a=window.__FINTRACK_INITIAL_SESSION__,b=window.__FINTRACK_INITIAL_DATA__,c=a?.user?.id;c&&b&&(b.wallets&&d.queryClient.setQueryData(g.walletKeys.list({userId:c}),b.wallets),b.transactions&&d.queryClient.setQueryData(h.transactionKeys.list({userId:c}),b.transactions),b.budgets&&d.queryClient.setQueryData(["budgets","list",{userId:c}],b.budgets),b.goals&&d.queryClient.setQueryData(["goals","list",{userId:c}],b.goals))}catch(a){}},[]),(0,b.jsx)(c.QueryClientProvider,{client:d.queryClient,children:(0,b.jsx)(e.UserProvider,{children:a})})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5ec02220._.js.map