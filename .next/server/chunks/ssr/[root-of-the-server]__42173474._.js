module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e(a){let{error:b}=a;if(d){let a=d.getStore();if((null==a?void 0:a.isRevalidate)||(null==a?void 0:a.isStaticGeneration))throw console.error(b),b}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return g}});let d=a.r(87924),e=a.r(51234),f={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}},g=function(a){let{error:b}=a,c=null==b?void 0:b.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:b}),(0,d.jsx)("div",{style:f.error,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:f.text,children:["Application error: a ",c?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",c?"server logs":"browser console"," for more information)."]}),c?(0,d.jsx)("p",{style:f.text,children:"Digest: "+c}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},43710,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(1834),e=a.i(69750),f=a.i(17069),g=a.i(45470);function h(){let{createTransaction:a,getTransactions:h,mutations:i}=(0,e.default)(),{createTransaction:j}=i,{user:k,loading:l}=(0,f.useUser)(),[m,n]=(0,c.useState)({amount:"",transaction_type:"expense",date:new Date().toISOString().split("T")[0],description:"",category_id:"",wallet_id:""}),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!1),C=(0,c.useCallback)(async()=>{if(k?.id){B(!0);try{let{data:a,error:b}=await g.supabase.from("transactions").select(`
          *,
          categories (category_name, category_type),
          wallets (wallet_name, currency)
        `).eq("user_id",k.id).order("date",{ascending:!1}).order("created_at",{ascending:!1}).limit(50);b?console.error("Error fetching transactions:",b):(z(a||[]),console.log("≡ƒôï Transactions fetched:",a?.length))}catch(a){console.error("Error fetching transactions:",a)}finally{B(!1)}}},[k]);(0,c.useEffect)(()=>{(async()=>{if(k?.id)try{console.log("≡ƒöä Starting to fetch categories...");let{data:a,error:b}=await g.supabase.from("categories").select("category_id, category_name, category_type").order("category_name",{ascending:!0});if(console.log("≡ƒôè Categories fetch result:",{data:a,error:b,count:a?.length}),!b&&a){p(a),console.log("Γ£à Categories set in state:",a.length,"categories");let b=a.filter(a=>"expense"===a.category_type);r(b),console.log("≡ƒÆ░ Filtered expense categories:",b.length)}else console.error("Γ¥î Error fetching categories:",b);let{data:c,error:d}=await g.supabase.from("wallets").select("wallet_id, wallet_name, balance, currency").eq("user_id",k.id).order("created_at",{ascending:!1});console.log("≡ƒæ¢ Wallets fetch result:",{data:c,error:d,count:c?.length}),!d&&c?t(c):console.error("Error fetching wallets:",d),await C()}catch(a){console.error("Error fetching data:",a)}finally{v(!1)}})()},[k?.id,C]),(0,c.useEffect)(()=>{o.length>0&&(r(o.filter(a=>a.category_type===m.transaction_type)),n(a=>({...a,category_id:""})))},[m.transaction_type,o]);let D=a=>{let{name:b,value:c}=a.target;n(a=>({...a,[b]:c}))},E=a=>{n(b=>({...b,transaction_type:a}))},F=async b=>{if(b.preventDefault(),!k?.id)return void console.error("User not found. Please make sure you're logged in.");if(!m.amount||!m.wallet_id||!m.category_id)return void console.error("Amount, wallet, and category are required");try{let b={user_id:k.id,amount:parseFloat(m.amount),transaction_type:m.transaction_type,date:m.date,description:m.description||null,wallet_id:m.wallet_id,category_id:m.category_id,budget_id:null,goal_id:null};console.log("Submitting transaction:",b);let c=await a(b);if(console.log("Transaction creation result:",c),c.error)throw Error(c.error.message);x(!0),n({amount:"",transaction_type:m.transaction_type,date:new Date().toISOString().split("T")[0],description:"",category_id:"",wallet_id:m.wallet_id}),await C(),setTimeout(()=>x(!1),3e3)}catch(a){console.error("Failed to create transaction:",a)}},G=j.isPending||l||u,H=j.error;return l?(0,b.jsxs)("div",{className:"min-h-screen bg-[#21121e] text-white font-sans",children:[(0,b.jsx)(d.default,{}),(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"text-white",children:"Loading..."})})]}):k||l?(0,b.jsxs)("div",{className:"min-h-screen bg-[#21121e] text-white font-sans",children:[(0,b.jsx)(d.default,{}),(0,b.jsx)("main",{className:"flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"mt-15 w-full max-w-6xl",children:[(0,b.jsx)("div",{className:"flex flex-wrap justify-between gap-3 p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex w-full flex-col gap-3 text-center",children:[(0,b.jsx)("h1",{className:"text-white text-3xl sm:text-4xl font-black leading-tight tracking-[-0.033em]",children:"Transactions"}),(0,b.jsx)("p",{className:"text-accent-cream/70 text-base font-normal leading-normal",children:"Record your income and expenses to track your finances."})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{children:[w&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500 rounded-lg text-green-300 text-center",children:"Transaction created successfully!"}),H&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500 rounded-lg text-red-300 text-center",children:["Error: ",H.message]}),(0,b.jsxs)("div",{className:"bg-white/10 p-6 sm:p-8 rounded-xl flex flex-col gap-6",children:[(0,b.jsx)("h2",{className:"text-white text-2xl font-bold text-center",children:"Add New Transaction"}),(0,b.jsxs)("form",{onSubmit:F,className:"flex flex-col gap-6",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("div",{className:"flex items-center bg-black/30 p-1 rounded-full",children:[(0,b.jsx)("button",{type:"button",className:`px-4 sm:px-6 py-2 text-sm font-bold rounded-full transition-colors cursor-pointer ${"expense"===m.transaction_type?"bg-[#9c167f] text-white":"text-accent-cream/70 hover:text-accent-cream"}`,onClick:()=>E("expense"),children:"Expense"}),(0,b.jsx)("button",{type:"button",className:`px-4 sm:px-6 py-2 text-sm font-medium rounded-full transition-colors cursor-pointer ${"income"===m.transaction_type?"bg-[#9c167f] text-white":"text-accent-cream/70 hover:text-accent-cream"}`,onClick:()=>E("income"),children:"Income"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-white text-base font-medium leading-normal pb-2",children:"Amount *"}),(0,b.jsx)("input",{name:"amount",value:m.amount,onChange:D,className:"w-full rounded-lg text-white focus:outline-none focus:ring-2 border border-transparent bg-black/20 focus:border-black h-12 sm:h-14 placeholder:text-white/30 px-4 text-base font-normal leading-normal",placeholder:"₱0.00",type:"number",step:"0.01",min:"0.01",required:!0})]}),(0,b.jsxs)("label",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-white text-base font-medium leading-normal pb-2",children:"Wallet *"}),(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsxs)("select",{name:"wallet_id",value:m.wallet_id,onChange:D,className:"appearance-none w-full cursor-pointer rounded-lg text-white focus:outline-none focus:ring-2 border border-transparent bg-black/20 focus:border-black/20 h-12 sm:h-14 px-4 text-base font-normal leading-normal",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Select Wallet"}),s.map(a=>(0,b.jsxs)("option",{value:a.wallet_id,children:[a.wallet_name," (",a.currency,")"]},a.wallet_id))]}),(0,b.jsx)("div",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-white",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-white text-base font-medium leading-normal pb-2",children:"Date *"}),(0,b.jsxs)("div",{className:"flex w-full items-stretch rounded-lg",children:[(0,b.jsx)("input",{name:"date",value:m.date,onChange:D,className:"flex-1 rounded-l-lg text-white focus:outline-none focus:ring-2 border border-transparent bg-black/20 focus:border-black h-12 sm:h-14 placeholder:text-white/30 px-4 border-r-0 text-base font-normal leading-normal",type:"date",required:!0}),(0,b.jsx)("div",{className:"text-white flex border border-transparent bg-black/20 items-center justify-center px-3 sm:px-4 rounded-r-lg border-l-0",children:(0,b.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-white text-base font-medium leading-normal pb-2",children:"Category *"}),(0,b.jsxs)("div",{className:"relative w-full",children:[(0,b.jsxs)("select",{name:"category_id",value:m.category_id,onChange:D,className:"appearance-none w-full cursor-pointer rounded-lg text-white focus:outline-none focus:ring-2 border border-transparent bg-black/20 focus:border-black/20 h-12 sm:h-14 px-4 text-base font-normal leading-normal",required:!0,children:[(0,b.jsxs)("option",{value:"",children:["Select"," ","income"===m.transaction_type?"Income":"Expense"," ","Category"]}),q.map(a=>(0,b.jsx)("option",{value:a.category_id,children:a.category_name},a.category_id))]}),(0,b.jsx)("div",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-white",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,b.jsxs)("p",{className:"text-white/50 text-sm mt-1",children:["income"===m.transaction_type?"Income categories":"Expense categories"," ","(",q.length," available)"]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-white text-base font-medium leading-normal pb-2",children:"Description"}),(0,b.jsx)("textarea",{name:"description",value:m.description,onChange:D,className:"w-full rounded-lg text-white focus:outline-none focus:ring-2 border border-transparent bg-black/20 focus:border-black/20 min-h-24 placeholder:text-white/30 p-4 text-base font-normal leading-normal resize-none",placeholder:"Add a description (optional)",rows:3})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{n({amount:"",transaction_type:"expense",date:new Date().toISOString().split("T")[0],description:"",category_id:"",wallet_id:""})},disabled:G,className:"w-full sm:w-auto flex items-center justify-center rounded-full h-12 bg-black/10 text-accent-cream text-sm font-bold leading-normal tracking-[0.015em] px-6 sm:px-8 border-2 border-[#9c167f] hover:bg-[#9c167f] transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:G,className:"w-full sm:w-auto flex items-center justify-center rounded-full h-12 bg-[#9c167f] text-white text-sm font-bold leading-normal tracking-[0.015em] px-6 sm:px-8 hover:bg-[#9c167f]/90 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:G?"Saving...":"Save Transaction"})]})]})]})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"bg-white/10 p-6 sm:p-8 rounded-xl",children:[(0,b.jsx)("h2",{className:"text-white text-2xl font-bold text-center mb-6",children:"Recent Transactions"}),A?(0,b.jsx)("div",{className:"text-center py-8",children:(0,b.jsx)("div",{className:"text-white",children:"Loading transactions..."})}):0===y.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"text-white/50",children:"No transactions yet"}),(0,b.jsx)("p",{className:"text-white/30 text-sm mt-2",children:"Your transactions will appear here"})]}):(0,b.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto",children:y.map(a=>(0,b.jsx)("div",{className:"bg-black/20 rounded-lg p-4 border border-white/10",children:(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:`inline-block w-2 h-2 rounded-full ${"income"===a.transaction_type?"bg-green-500":"bg-red-500"}`}),(0,b.jsx)("span",{className:"text-white font-medium",children:a.categories?.category_name})]}),(0,b.jsx)("p",{className:"text-white/70 text-sm",children:a.description||"No description"}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,b.jsx)("span",{className:"text-white/50 text-xs",children:new Date(a.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,b.jsx)("span",{className:"text-white/50 text-xs",children:a.wallets?.wallet_name})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("div",{className:`text-lg font-bold ${"income"===a.transaction_type?"text-green-400":"text-red-400"}`,children:["income"===a.transaction_type?"+":"-",((a,b="PHP")=>new Intl.NumberFormat("en-PH",{style:"currency",currency:b,minimumFractionDigits:2}).format(a))(a.amount,a.wallets?.currency)]})})]})},a.transaction_id))})]})})]})]})})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-[#21121e] text-white font-sans",children:[(0,b.jsx)(d.default,{}),(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"text-white text-center",children:(0,b.jsx)("p",{children:"Please log in to add transactions."})})})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__42173474._.js.map