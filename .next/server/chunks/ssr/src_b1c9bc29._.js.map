{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lyn/Desktop/GC/3rd%20Year/IT%20Elective%202%20Front%20End/FinTrack-IT-Elective-2/src/context/userContext.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const UserProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/context/userContext.js <module evaluation>\",\n    \"UserProvider\",\n);\nexport const useUser = registerClientReference(\n    function() { throw new Error(\"Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/context/userContext.js <module evaluation>\",\n    \"useUser\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,4DACA;AAEG,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,4DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lyn/Desktop/GC/3rd%20Year/IT%20Elective%202%20Front%20End/FinTrack-IT-Elective-2/src/context/userContext.js/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const UserProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/context/userContext.js\",\n    \"UserProvider\",\n);\nexport const useUser = registerClientReference(\n    function() { throw new Error(\"Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/context/userContext.js\",\n    \"useUser\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,wQAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,wCACA;AAEG,MAAM,UAAU,IAAA,wQAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,wCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lyn/Desktop/GC/3rd%20Year/IT%20Elective%202%20Front%20End/FinTrack-IT-Elective-2/src/lib/supabase-server.js"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\n// Provide a factory for creating a server-side Supabase client on demand.\r\n// Avoid creating the client at module-eval time because missing env vars\r\n// (especially during local dev or SSR) will cause a hard failure.\r\nexport function getSupabaseServerClient() {\r\n  const url = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n  const key =\r\n    process.env.SUPABASE_SERVICE_ROLE_KEY ||\r\n    process.env.SUPABASE_SERVICE_KEY ||\r\n    process.env.SUPABASE_ANON_KEY;\r\n\r\n  if (!url || !key) {\r\n    throw new Error(\r\n      \"Supabase server env variables are not set. Please set SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY (or SUPABASE_SERVICE_KEY).\"\r\n    );\r\n  }\r\n\r\n  return createClient(url, key, {\r\n    auth: { persistSession: false },\r\n  });\r\n}\r\n\r\nexport default getSupabaseServerClient;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAKO,SAAS;IACd,MAAM,MAAM,QAAQ,GAAG,CAAC,YAAY;IACpC,MAAM,MACJ,QAAQ,GAAG,CAAC,yBAAyB,IACrC,QAAQ,GAAG,CAAC,oBAAoB,IAChC,QAAQ,GAAG,CAAC,iBAAiB;IAE/B,IAAI,CAAC,OAAO,CAAC,KAAK;QAChB,MAAM,IAAI,MACR;IAEJ;IAEA,OAAO,IAAA,uMAAY,EAAC,KAAK,KAAK;QAC5B,MAAM;YAAE,gBAAgB;QAAM;IAChC;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lyn/Desktop/GC/3rd%20Year/IT%20Elective%202%20Front%20End/FinTrack-IT-Elective-2/src/app/pages/dashboard/layout.js"],"sourcesContent":["import { UserProvider } from \"@/context/userContext\";\r\nimport { cookies } from \"next/headers\";\r\nimport { getSupabaseServerClient } from \"@/lib/supabase-server\";\r\n\r\nexport const metadata = {\r\n  title: \"FinTrack\",\r\n  description: \"Manage your finances easily\",\r\n};\r\n\r\nexport default async function RootLayout({ children }) {\r\n  // Best-effort: try to read a supabase session cookie and expose it to the client\r\n  // for immediate hydration. Many sessions in this project are stored in\r\n  // localStorage, so this may be absent. This is intentionally non-blocking.\r\n  let initialSession = null;\r\n  try {\r\n    const cookieStore = cookies();\r\n    const raw =\r\n      cookieStore.get(\"supabase.auth.token\")?.value ||\r\n      cookieStore.get(\"supabase-session\")?.value ||\r\n      null;\r\n\r\n    if (raw) {\r\n      // supabase client sometimes stores a JSON string in the cookie\r\n      const parsed = JSON.parse(raw);\r\n      const user = parsed?.user || parsed?.currentSession?.user || null;\r\n      if (user) initialSession = { user };\r\n    }\r\n  } catch (err) {\r\n    // ignore parsing errors â€” fallback to client detection\r\n    initialSession = null;\r\n  }\r\n\r\n  // Best-effort server fetch of initial dashboard data when we have a user id\r\n  let initialData = null;\r\n  try {\r\n    const userId = initialSession?.user?.id;\r\n    if (userId) {\r\n      const supabaseServer = getSupabaseServerClient();\r\n\r\n      const [\r\n        { data: wallets },\r\n        { data: transactions },\r\n        { data: budgets },\r\n        { data: goals },\r\n      ] = await Promise.all([\r\n        supabaseServer\r\n          .from(\"wallets\")\r\n          .select(\"*\")\r\n          .eq(\"user_id\", userId)\r\n          .order(\"created_at\", { ascending: false }),\r\n        supabaseServer\r\n          .from(\"transactions\")\r\n          .select(`*, categories(*)`)\r\n          .eq(\"user_id\", userId)\r\n          .order(\"date\", { ascending: false })\r\n          .limit(10),\r\n        supabaseServer.from(\"budgets\").select(\"*\").eq(\"user_id\", userId),\r\n        supabaseServer.from(\"goals\").select(\"*\").eq(\"user_id\", userId),\r\n      ]);\r\n\r\n      initialData = { wallets, transactions, budgets, goals };\r\n    }\r\n  } catch (err) {\r\n    // If server fetch fails, continue without blocking the client.\r\n    initialData = null;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <UserProvider initialSession={initialSession}>{children}</UserProvider>\r\n      {initialSession && (\r\n        <script\r\n          dangerouslySetInnerHTML={{\r\n            __html: `window.__FINTRACK_INITIAL_SESSION__ = ${JSON.stringify(\r\n              initialSession\r\n            )}; window.__FINTRACK_INITIAL_DATA__ = ${JSON.stringify(\r\n              initialData\r\n            )};`,\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,WAAW;IACtB,OAAO;IACP,aAAa;AACf;AAEe,eAAe,WAAW,EAAE,QAAQ,EAAE;IACnD,iFAAiF;IACjF,uEAAuE;IACvE,2EAA2E;IAC3E,IAAI,iBAAiB;IACrB,IAAI;QACF,MAAM,cAAc,IAAA,0IAAO;QAC3B,MAAM,MACJ,YAAY,GAAG,CAAC,wBAAwB,SACxC,YAAY,GAAG,CAAC,qBAAqB,SACrC;QAEF,IAAI,KAAK;YACP,+DAA+D;YAC/D,MAAM,SAAS,KAAK,KAAK,CAAC;YAC1B,MAAM,OAAO,QAAQ,QAAQ,QAAQ,gBAAgB,QAAQ;YAC7D,IAAI,MAAM,iBAAiB;gBAAE;YAAK;QACpC;IACF,EAAE,OAAO,KAAK;QACZ,uDAAuD;QACvD,iBAAiB;IACnB;IAEA,4EAA4E;IAC5E,IAAI,cAAc;IAClB,IAAI;QACF,MAAM,SAAS,gBAAgB,MAAM;QACrC,IAAI,QAAQ;YACV,MAAM,iBAAiB,IAAA,2JAAuB;YAE9C,MAAM,CACJ,EAAE,MAAM,OAAO,EAAE,EACjB,EAAE,MAAM,YAAY,EAAE,EACtB,EAAE,MAAM,OAAO,EAAE,EACjB,EAAE,MAAM,KAAK,EAAE,CAChB,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACpB,eACG,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;oBAAE,WAAW;gBAAM;gBAC1C,eACG,IAAI,CAAC,gBACL,MAAM,CAAC,CAAC,gBAAgB,CAAC,EACzB,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,QAAQ;oBAAE,WAAW;gBAAM,GACjC,KAAK,CAAC;gBACT,eAAe,IAAI,CAAC,WAAW,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW;gBACzD,eAAe,IAAI,CAAC,SAAS,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW;aACxD;YAED,cAAc;gBAAE;gBAAS;gBAAc;gBAAS;YAAM;QACxD;IACF,EAAE,OAAO,KAAK;QACZ,+DAA+D;QAC/D,cAAc;IAChB;IAEA,qBACE;;0BACE,8OAAC,6IAAY;gBAAC,gBAAgB;0BAAiB;;;;;;YAC9C,gCACC,8OAAC;gBACC,yBAAyB;oBACvB,QAAQ,CAAC,sCAAsC,EAAE,KAAK,SAAS,CAC7D,gBACA,qCAAqC,EAAE,KAAK,SAAS,CACrD,aACA,CAAC,CAAC;gBACN;;;;;;;;AAKV","debugId":null}}]
}